<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Â≠¶ÊúØËüëËûÇÊäΩÂç°Êú∫</title>
  <style>
    body {
      font-family: 'Courier New', monospace;
      background: #111;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    h1 {
      font-size: 2.2rem;
      color: #facc15;
      margin-bottom: 1rem;
    }
    button {
      padding: 1rem 2rem;
      background: #facc15;
      border: none;
      border-radius: 8px;
      color: #111;
      font-size: 1.2rem;
      cursor: pointer;
    }
    #card {
      margin-top: 2rem;
      font-size: 1.3rem;
      text-align: center;
      padding: 2rem;
      border: 2px dashed #facc15;
      border-radius: 12px;
      max-width: 500px;
      opacity: 0;
      transform: scale(0.8);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }
    #card.show {
      opacity: 1;
      transform: scale(1);
    }
    .card-title {
      font-weight: bold;
      color: #facc15;
      margin-bottom: 0.5rem;
      font-size: 1.4rem;
    }
    .card-body {
      font-size: 1.2rem;
      line-height: 1.5;
    }
    #history {
      margin-top: 2rem;
      width: 90%;
      max-width: 500px;
      text-align: left;
    }
    #history h2 {
      color: #facc15;
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
    }
    #history-list {
      list-style: none;
      padding: 0;
      max-height: 200px;
      overflow-y: auto;
    }
    #history-list li {
      background: rgba(250, 201, 21, 0.1);
      margin-bottom: 0.5rem;
      padding: 0.5rem;
      border-radius: 4px;
      font-size: 0.95rem;
    }
  </style>
</head>
<body>
  <h1>ÁßëÁ†îËüëËûÇÊäΩÂç°Êú∫ üé¥</h1>
  <button id="draw-btn">ÊäΩ‰∏ÄÂº†Âç°ÔºÅ</button>
  <div id="card"></div>
  <div id="history">
    <h2>ÊäΩÂç°ËÆ∞ÂΩï</h2>
    <ul id="history-list"></ul>
  </div>
  <audio id="bgm" loop style="display:none;">
    <source src="https://cdn.pixabay.com/audio/2022/10/16/audio_12f81b54f6.mp3" type="audio/mp3">
  </audio>
  <script>
    // ----------------Âç°Ê±†ÂÜÖÂÆπ-----------------
    const cards = [
        { level: 'R', text: "Êï¥ÁêÜ3Êù°‰ªäÂ§©ÁöÑÂæÖÂäû‰∫ãÈ°π„ÄÇ" },
        { level: 'R', text: "ÈöèÊú∫ËØª‰∏ÄÁØáÁõ∏ÂÖ≥È¢ÜÂüüÁöÑÊñáÁåÆÊëòË¶ÅÔºåÂπ∂Áî®‰∏ÄÂè•ËØùÊÄªÁªìÂÆÉÁöÑ‰∏ªË¶ÅËßÇÁÇπ„ÄÇ" },
        { level: 'R', text: "ÊääÊ°åÈù¢Êï¥ÁêÜ10ÂàÜÈíüÔºåÂè™Êî∂ÊãæÂíåÁßëÁ†îÁõ∏ÂÖ≥ÁöÑ‰∏úË•ø„ÄÇ" },
        { level: 'R', text: "Ëä±15ÂàÜÈíüÂú®Êï∞ÊçÆÂ∫ìÔºàÂ¶ÇPubMed/Google ScholarÔºâÈöèÊú∫ÊêúËØæÈ¢òÁÉ≠ËØçÔºåÂπ∂ÈòÖËØª1ÁØáÊñ∞ÊñáÁåÆ„ÄÇ" },
        { level: 'R', text: "ÂíåGPTËÅä5ÂàÜÈíüÔºö‰ªäÂ§©‰Ω†ÊúÄÊÉ≥Ëß£ÂÜ≥ÁöÑresearchÂ∞èÈóÆÈ¢òÊòØ‰ªÄ‰πàÔºü" },
        { level: 'R', text: "Áúã‰∏Ä‰ΩçÈ¢ÜÂüüÂ§ßÁâõÁöÑÊñ∞ËÆ∫Êñá/ËÆ≤Â∫ßËßÜÈ¢ë„ÄÇ" },
        { level: 'R', text: "Êâæ‰∏ÄÁØá‰Ω†ÂØºÂ∏àËøë3Âπ¥ÂÜÖÁöÑËÆ∫ÊñáÔºåÊääÊëòË¶ÅÊäÑ‰∏ÄÈÅç„ÄÇ" },
        { level: 'R', text: "ÊâìÂºÄËÄÅÊñáÁåÆÔºåÊ†áËÆ∞Âá∫1Âè•‰Ω†ËßâÂæóÊúÄÊúâÁî®ÊàñÊúÄÊÉ≥ÂêêÊßΩÁöÑËØù„ÄÇ" },
        { level: 'R', text: "Ëä±10ÂàÜÈíüÊ£ÄÊü•ÈÇÆÁÆ±ÔºåÊääÂÖ®ÈÉ®ÂíåÁ†îÁ©∂Áõ∏ÂÖ≥ÁöÑÈÇÆ‰ª∂ÂΩíÊ°£Âà∞‰∏Ä‰∏™Êñá‰ª∂Â§π„ÄÇ" },
        { level: 'R', text: "Êâæ‰∏Ä‰∏™‰Ω†‰ªéÊ≤°ËØïËøáÁöÑÊï∞ÊçÆÂ∫ìÔºåÊ£ÄÁ¥¢ËØæÈ¢òÁõ∏ÂÖ≥ÂÖ≥ÈîÆËØçÂπ∂Êà™ÂõæÁïåÈù¢„ÄÇ" },
        { level: 'R', text: "ÂøÖÈ°ªÂÜôËá≥Â∞ë500 wordsÁßëÁ†îÁõ∏ÂÖ≥ËæìÂá∫ÔºåÂÜôÂÆåÊâçËÉΩ‰ºëÊÅØ„ÄÇ" },
        { level: 'R', text: "ÂΩï‰∏ÄÊÆµ‰Ω†ÂêëËá™Â∑±Ëß£ÈáäÁ†îÁ©∂ÊñπÊ≥ïÁöÑËßÜÈ¢ëÔºåÂ≠òÊ°£‰ª•ÂêéÁúãÁ¨ëËØù" },
        { level: 'R', text: "Áî®1ÂàÜÈíüËØ¥Âá∫‰Ω†È°πÁõÆÁöÑÁ†îÁ©∂ÈóÆÈ¢òÔºåÊâãÊú∫ÂΩïÈü≥ÂõûÊîæ‰∏ÄÊ¨°„ÄÇ" },
        { level: 'R', text: "ÁªôËá™Â∑±ÂÆâÊéí‰∏ÄÊ¨°10ÂàÜÈíüÁöÑÂÜ•ÊÉ≥ÔºåÊÉ≥Ë±°ÁßëÁ†îÈ°∫Âà©ÁöÑ‰∏ÄÂ§©„ÄÇ" },
        { level: 'R', text: "Áî®‰∏ÄÂè•ËØù‰∏∫‰Ω†ÁöÑËÆ∫ÊñáÊàñÈ°πÁõÆÂÜô‰∏Ä‰∏™Âê∏Âºï‰∫∫ÁöÑÊ†áÈ¢òÔºåÂÜô‰∏âÁâà„ÄÇ" },
        { level: 'R', text: "ÈöèÊú∫Êü•ÊâæËÄÅÂπ¥ÊÇ£ËÄÖ‰ΩèÈô¢Ë¥®ÈáèÁõ∏ÂÖ≥ÁöÑ‰∏Ä‰∏™ËØÑ‰º∞ÈáèË°®ÔºåÊï¥ÁêÜÂà∞Ëá™Â∑±ÁöÑÁü•ËØÜÂ∫ì" },
        { level: 'R', text: "ÁªüËÆ°‰Ω†Á†îÁ©∂ÂØπË±°‰∏≠ËÄÅÂπ¥‰ΩèÈô¢ÁéáÁöÑÊúÄÊñ∞ÊñáÁåÆÊï∞ÊçÆÔºåÂπ∂ÂÜô‰∏ÄÂè•ÊÄªÁªì„ÄÇ" },
        { level: 'R', text: "Áî®Ë°®Ê†ºÂØπÊØî‰∏§ÁßçÂ∏∏ËßÅËÄÅÂπ¥ÁñæÁóÖÔºàÂ¶ÇÁ≥ñÂ∞øÁóÖÂíåÈ´òË°ÄÂéãÔºâÁöÑ‰ΩèÈô¢Ê≤ªÁñóÊµÅÁ®ã„ÄÇ" },
        { level: 'R', text: "ÂÆöÊó∂45ÂàÜÈíüÁï™ËåÑÈíüÔºå‰∏çÁúãÊâãÊú∫Ôºå‰∏ìÊ≥®ÂÜô‰Ωú/ÈòÖËØª‰∏ÄÈ°πÁ†îÁ©∂‰ªªÂä°„ÄÇ" },
        { level: 'R', text: "Ëµ∑Ë∫´ÂñùÊ∞¥800mlÔºåÂèòË∫´ÁßëÁ†îÊ∞¥ÊØçü™º" },
        { level: 'R', text: "ÈöèÊú∫Êü•‰∏Ä‰∏™‰Ω†‰∏ç‰∫ÜËß£ÁöÑÂÆóÊïôÔºå‰∫ÜËß£15ÂàÜÈíü" },
        { level: 'SR', text: "ËÆæÂÆö‰∏§Â∞èÊó∂ÂÜô‰ΩúÊó†ÁΩëÊåëÊàòÔºåÊàêÂäüÂèØÂà∑30ÂàÜÈíüÊäñÈü≥" },
        { level: 'SR', text: "Ê†πÊçÆÊæ≥Â§ßÂà©‰∫öÂç´ÁîüÈÉ®Èó®Êï∞ÊçÆÔºåÂÜô‰∏ÄÊÆµÂΩìÂâçËÄÅÂπ¥‰∫∫‰ΩèÈô¢‰∏ªË¶ÅÂéüÂõ†ÁöÑÂàÜÊûêÔºà100Â≠ó+Ôºâ„ÄÇ" },
        { level: 'SR', text: "ÂΩíÁ∫≥Âπ∂ÁîªÂá∫1Âº†ÂõæÁ§∫ÔºåÂ±ïÁ§∫ËÄÅÂπ¥‰∫∫Â∏∏ËßÅÊÖ¢ÁóÖÁöÑÊÇ£ÁóÖÁéáÈöèÂπ¥ÈæÑÁöÑÂèòÂåñË∂ãÂäø„ÄÇ" },
        { level: 'SR', text: "ÂÜô‰∏Ä‰ªΩÁÆÄË¶ÅÊä•ÂëäÔºåÊØîËæÉ‰∏çÂêåÂõΩÂÆ∂ËÄÅÂπ¥ÊÇ£ËÄÖÂπ≥Âùá‰ΩèÈô¢Â§©Êï∞ÁöÑÂ∑ÆÂºÇÂèäÂèØËÉΩÂéüÂõ†„ÄÇ" },
        { level: 'SR', text: "Êåë‰∏Ä‰∏™ÁêÜËÆ∫Ê¶ÇÂøµÔºåÊü•Êâæ2-3Êù°‰∏çÂêåÂ≠¶ËÄÖÁöÑËßÇÁÇπÔºåÂÜôÂ∞èÊÄªÁªì„ÄÇ" },
        { level: 'SR', text: "ÂÜô‰∏ÄÁØá„ÄäÁßëÁ†îÊãâË∏©Êñá„ÄãÔºåÂÜÖÂÆπ‰∏çÈôêÂØπË±°ÔºåË∂ädramaË∂äÂ•Ω" },
        { level: 'SR', text: "Á≤æËØª‰∏ÄÁØáÊñáÁåÆÁöÑmethodsÈÉ®ÂàÜÔºåÁî®Ëá™Â∑±ÁöÑËØùÂ§çËø∞ÊµÅÁ®ãË¶ÅÁÇπÂπ∂ËΩ¨ÂΩï‰∏ãÊù•„ÄÇ" },
        { level: 'SR', text: "ËÆ©GPTÂÜô‰∏Ä‰ªΩ‚ÄòÁßëÁ†îÁñØ‰∫∫Áî≥ËØ∑Ë°®‚ÄôÔºåÂÜÖÂÆπË∂äÁ¶ªË∞±Ë∂äÂ•Ω" },
        { level: 'SR', text: "ËÆæÁΩÆÁï™ËåÑÈíü45ÂàÜÈíüÂÜô‰ΩúÔºåÁ´ãÂàªÂºÄÂßã" },
        { level: 'SR', text: "ÂíåGPTÂØπËØù30ÂàÜÈíüÔºåÂè™ËÅäËá™Â∑±ÁöÑÂ≠¶ÊúØÈ¢ÜÂüü" },
        { level: 'SR', text: "‰∏∫‰Ω†ÁöÑÁ†îÁ©∂ÂÜô‰∏Ä‰∏™‚ÄúFAQ‚ÄùÔºàÂ∏∏ËßÅÁñëÊÉë3Êù°Âèä‰Ω†ÁöÑÂõûÂ§çÔºâ„ÄÇ" },
        { level: 'SR', text: "Êü•ÊâæÂπ∂ÂΩíÁ∫≥‰∏Ä‰∏™Áõ∏ÂÖ≥È¢ÜÂüüÁöÑÊäÄÊúØÊñ∞ÊñπÊ≥ïÔºåÂπ∂ÂÜôÊàê1È°µpptÊàñ‰∏ÄÊÆµÊÄªÁªì„ÄÇ" },
        { level: 'SR', text: "ÂÜô‰∏ÄÂè•sloganÔºåÂÅöÊàêË°®ÊÉÖÂåÖÔºàÂèØAIÁîüÊàê/ÊâãÁªòÔºâÔºåË°®Ëææ‰Ω†Á†îÁ©∂Ê†∏ÂøÉ„ÄÇ" },
        { level: 'SR', text: "ÂÜô‰∏Ä‰ªΩÊñáÁåÆÈòÖËØªÁ¨îËÆ∞ÔºåÊÄªÁªì‰∏ÄÁØáËÆ∫ÊñáÁöÑÂàõÊñ∞‰πãÂ§ÑÂíå‰∏çË∂≥„ÄÇ" },
        { level: 'SR', text: "ÊÄªÁªì3Êù°Êæ≥Â§ßÂà©‰∫öËÄÅÂπ¥ÂåªÂ≠¶Áõ∏ÂÖ≥ÂÅ•Â∫∑ÊîøÁ≠ñÔºåÂÜôËøõÁ†îÁ©∂Á¨îËÆ∞„ÄÇ" },
        { level: 'SSR', text: "ÂÖ≥ÊéâÊâÄÊúâÊ∂àÊÅØÈÄöÁü•5Â∞èÊó∂Ôºå‰∏ñÁïåÂ°å‰∫Ü‰πü‰∏çËÆ∏ÂºÄ" },
        { level: 'SSR', text: "Áî®Áï™ËåÑÂ∑•‰ΩúÊ≥ïÂÆåÊàê3*45ÂàÜÈíüËøûÁª≠È´òÊïàÁ†îÁ©∂ËæìÂá∫ÔºåÊØèËΩÆÂêéÂÜô‰∏ÄÂè•ÂøÉÂæó‰Ωì‰ºö„ÄÇ" },
        { level: 'SSR', text: "ËøûÁª≠ÂÜô‰Ωú90ÂàÜÈíüÔºåÂÆåÊàê‰∏Ä‰ªΩ‰∫ßÂá∫Â∞èËäÇÂàùÁ®øÔºà‰∏çÂ∞ë‰∫é400Â≠óÔºâ„ÄÇ" },
        { level: 'SSR', text: "ÂÜô‰∏ÄÈ°µÁ¨îËÆ∞ÔºåËÆ®ËÆ∫ËÄÅÂπ¥ÂåªÂ≠¶È¢ÜÂüüÁõÆÂâçÊúÄÂ§ßÊú™Êª°Ë∂≥ÂÅ•Â∫∑ÈúÄÊ±ÇÔºàunmet needsÔºâ„ÄÇ" },
        { level: 'SSR', text: "ÊåëÈÄâ‰∏Ä‰ªΩÈ´òÂΩ±ÂìçÂäõÁöÑËÄÅÂπ¥ÂåªÂ≠¶ÊåáÂçó/ÊîøÁ≠ñÔºåÂÜô‰∏ÄÊÆµÊëòË¶ÅËØ¥ÊòéÂÖ∂ÂØπ‰Ω†ËØæÈ¢òÁöÑÊÑè‰πâ„ÄÇ" },
        { level: 'SSR', text: "Êêú‰∏Ä‰∏™‚ÄúÂ¶Ç‰ΩïË∫∫Âπ≥Âç¥‰ªçÁÑ∂Ëµ¢ÂæóËØ∫Â•ñ‚ÄùÁöÑÂÖ≥ÈîÆËØçÔºåËØªÂÆÉ" },
        { level: 'SSR', text: "Êï¥ÁêÜÂá∫‰Ω†ËØæÈ¢òÊ†∏ÂøÉÈ¢ÜÂüüËøë‰∫îÂπ¥10ÁØá‰ª£Ë°®ÊÄßÊñáÁåÆÔºåÂÅöÂÖ≥ÈîÆËØç„ÄÅÊñπÊ≥ï„ÄÅÁªìËÆ∫‰∏âÊ†èÂØπÊØîË°®„ÄÇ" },
        { level: 'SSR', text: "ÂÜô‰∏ÄÁØá500 words‰∫ßÂá∫ËçâÁ®ø" },
    ];
    // --------ÂàÜÁ∫ßÊäΩÂèñÊ¶ÇÁéá-------------
    const rCards   = cards.filter(c => c.level === 'R');
    const srCards  = cards.filter(c => c.level === 'SR');
    const ssrCards = cards.filter(c => c.level === 'SSR');

    // --------ÊäΩÂç°ËÆ∞ÂΩïÈÉ®ÂàÜ-------------
    let history = JSON.parse(localStorage.getItem('drawCardHistory') || '[]');
    function renderHistory() {
      historyList.innerHTML = history.map(i => `<li>${i}</li>`).join('');
    }
    renderHistory();

    // ----------ÊäΩÂç°Êú∫Âà∂ÂèÇÊï∞------------
    const DRAW_LIMIT = 2;     // ÊØè5Â∞èÊó∂ÂèØÊäΩ2Ê¨°
    const COOLDOWN = 5 * 60 * 60 * 1000; // 5Â∞èÊó∂ÔºåÊØ´Áßí

    function getDrawState() {
      const state = JSON.parse(localStorage.getItem('drawCardCycleState') || '{}');
      return state;
    }

    function setDrawState(state) {
      localStorage.setItem('drawCardCycleState', JSON.stringify(state));
    }

    function getCurrentCycle() {
      // Áî®2024-01-01 00:00‰∏∫Êó∂Èó¥ÂéüÁÇπ
      const epoch = new Date('2024-01-01T00:00:00').getTime();
      const now = Date.now();
      const diff = now - epoch;
      const cycle = Math.floor(diff / COOLDOWN);
      return cycle;
    }

    function updateDrawBtn() {
      const cycle = getCurrentCycle();
      const state = getDrawState();
      const cur = state[cycle] || { count: 0, time: Date.now() };
      if (cur.count >= DRAW_LIMIT) {
        // ËÆ°ÁÆó‰∏ã‰∏Ä‰∏™Âà∑Êñ∞Êó∂Èó¥
        const nextCycle = (cycle + 1) * COOLDOWN + new Date('2024-01-01T00:00:00').getTime();
        const leftMs = nextCycle - Date.now();
        const leftH = Math.ceil(leftMs / 3600000);
        drawBtn.disabled = true;
        drawBtn.textContent = `Â∑≤ÊäΩ${DRAW_LIMIT}Ê¨°Ôºå${leftH}Â∞èÊó∂ÂêéÂà∑Êñ∞üé¥`;
      } else {
        drawBtn.disabled = false;
        drawBtn.textContent = `ÊäΩ‰∏ÄÂº†Âç°ÔºÅÔºàÊú¨ËΩÆÂâ©‰Ωô${DRAW_LIMIT - cur.count}Ê¨°Ôºâ`;
      }
    }

    function drawCard() {
      const cycle = getCurrentCycle();
      const state = getDrawState();
      if (!state[cycle]) state[cycle] = { count: 0, time: Date.now() };
      if (state[cycle].count >= DRAW_LIMIT) {
        alert("Êú¨ËΩÆÂ∑≤Áî®ÂÆå2Ê¨°ÊäΩÂç°Êú∫‰ºöÔºåËØ∑Á≠âÂæÖ5Â∞èÊó∂Âà∑Êñ∞ÔºÅ");
        updateDrawBtn();
        return;
      }
      if (bgm.paused) bgm.play().catch(() => {});
      const rand = Math.random();
      let pool = rand < 0.15 ? ssrCards : rand < 0.40 ? srCards : rCards;
      const card = pool[Math.floor(Math.random() * pool.length)];
      cardDiv.classList.remove('show');
      cardDiv.innerHTML = `<div class='card-title'>${card.level} ÊäΩ‰∏≠ÔºÅ</div><div class='card-body'>${card.text}</div>`;
      setTimeout(() => cardDiv.classList.add('show'), 50);
      const timestamp = new Date().toLocaleString();
      history.unshift(`${timestamp} ‚Äî ${card.level} - ${card.text}`);
      if (history.length > 20) history.pop();
      localStorage.setItem('drawCardHistory', JSON.stringify(history));
      renderHistory();

      state[cycle].count += 1;
      setDrawState(state);

      updateDrawBtn();
    }

    // Ëá™Âä®Ê£ÄÊµãÊñ∞Âë®ÊúüÂà∞Êù•ÔºåÂà∑Êñ∞ÊåâÈíÆ
    setInterval(updateDrawBtn, 5000); // ÊØè5ÁßíÊ£ÄÊµã‰∏ÄÊ¨°
    updateDrawBtn();

    drawBtn.onclick = drawCard;
  </script>
</body>
</html>
